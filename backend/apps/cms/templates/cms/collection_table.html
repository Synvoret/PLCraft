
{% load custom_tags %}
<table id="collection-table"
       class="table table-hover table-sm text-center table-bordered align-middle"
       data-collection-type="{{ collection_type }}"
       data-fields="{{ fields_json|escapejs }}">
    <thead>
        <tr>
            <th scope="col">No</th>
            {% for field in fields %}
                <th scope="col">{{ field|capfirst }}</th>
            {% endfor %}
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
            <tr data-id="{{ item|get_item:'id' }}" data-type="{{ collection_type }}">
                <td>{{ forloop.counter }}</td>
                {% for field in fields %}
                    <td>
                        {% if field == 'image' and item|get_item:field %}
                            <img class="table-img" src="/media/{{ item|get_item:field }}">
                        {% else %}
                        {{ item|get_item:field }}
                        {% endif %}
                    </td>
                {% endfor %}
                <td>
                    <button class="btn btn-sm btn-outline-info flex-fill" title="View">ğŸ‘ï¸</button>
                    <button class="btn btn-sm btn-outline-primary flex-fill" title="Edit">âœï¸</button>
                    <button class="btn btn-sm btn-outline-danger flex-fill delete-btn" title="Delete">ğŸ—‘ï¸</button>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="{{ fields|length|add:2 }}" class="text-muted">No data</td>
            </tr>
        {% endfor %}
        <tr id="add-row" data-type="{{ collection_type }}">
            <td colspan="{{ fields|length|add:1 }}"></td>
            <td class="d-flex justify-content-center">
                <button class="btn btn-sm btn-outline-info add-btn">â•</button>
            </td>
        </tr>
    </tbody>
</table>
